@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap");
@import "tailwindcss";
@import "./typography.css";
@import "./neon-enhancements.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *, [data-theme=cyber], [data-theme=cyber] *));

:root {
  --background: #fafafa;
  --element-background: rgba(255, 255, 255, 0.85);
  --secondary-background: rgba(0, 0, 0, 0.02);
  --foreground: #1a1a1a;
  --secondary-foreground: #4a4a4a;
  --accent: #10b981;
  --accent-soft: rgba(16, 185, 129, 0.12);
  --muted: #d1d5db;
  --border: rgba(0, 0, 0, 0.06);
  --shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.1);
  --display-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --heading-font: "JetBrains Mono", "Space Mono", "Fira Code", monospace;
  --code-font: "Fira Code", "JetBrains Mono", "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --code-bg: #f5f5f5;
  --code-border: #e0e0e0;
  --code-text: #1a1a1a;
  --code-inline-bg: #f0f0f0;
  --code-line-highlight: rgba(16, 185, 129, 0.1);
  --code-token-keyword: #10b981;
  --code-token-string: #059669;
  --code-token-comment: #6b7280;
  --code-token-number: #dc2626;
  --code-token-function: #8b5cf6;
}

/* Dark Theme - Classic dark mode with amber accent */
html[data-theme="dark"] {
  --background: #0a0a0a;
  --element-background: rgba(18, 18, 18, 0.8);
  --secondary-background: rgba(255, 255, 255, 0.03);
  --foreground: #f3f4f6;
  --secondary-foreground: #9ca3af;
  --accent: #f59e0b;
  --accent-soft: rgba(245, 158, 11, 0.15);
  --muted: #262626;
  --border: rgba(255, 255, 255, 0.08);
  --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  --display-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --heading-font: "JetBrains Mono", "Space Mono", "Fira Code", monospace;
  --code-font: "Fira Code", "JetBrains Mono", "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --code-bg: #171717;
  --code-border: #262626;
  --code-text: #f5f5f5;
  --code-inline-bg: #262626;
  --code-line-highlight: rgba(245, 158, 11, 0.2);
  --code-token-keyword: #fbbf24;
  --code-token-string: #34d399;
  --code-token-comment: #737373;
  --code-token-number: #f87171;
  --code-token-function: #a78bfa;
}

/* Cyber Theme - Technical/Neon aesthetic with purple/magenta */
html[data-theme="cyber"] {
  --background: #020617;
  --element-background: rgba(15, 23, 42, 0.7);
  --secondary-background: rgba(255, 255, 255, 0.05);
  --foreground: #f8fafc;
  --secondary-foreground: #94a3b8;
  --accent: #a855f7;
  --accent-soft: rgba(168, 85, 247, 0.15);
  --muted: #1e293b;
  --border: rgba(148, 163, 184, 0.12);
  --shadow: 0 25px 50px -15px rgba(0, 0, 0, 0.7);
  --display-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --heading-font: "JetBrains Mono", "Space Mono", "Fira Code", monospace;
  --code-font: "Fira Code", "JetBrains Mono", "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --code-bg: #0f172a;
  --code-border: #1e293b;
  --code-text: #f1f5f9;
  --code-inline-bg: #1e293b;
  --code-line-highlight: rgba(168, 85, 247, 0.2);
  --code-token-keyword: #c084fc;
  --code-token-string: #34d399;
  --code-token-comment: #64748b;
  --code-token-number: #f87171;
  --code-token-function: #ec4899;
}

/* Academic Theme - Warm, paper-like light theme with teal accent */
html[data-theme="academic"] {
  --background: #fdfdfc;
  --element-background: rgba(255, 255, 255, 0.9);
  --secondary-background: #f8f8f7;
  --foreground: #1c1c1c;
  --secondary-foreground: #525252;
  --accent: #0d9488;
  --accent-soft: rgba(13, 148, 136, 0.1);
  --muted: #e5e5e5;
  --border: rgba(0, 0, 0, 0.08);
  --shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.05);
  --display-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --heading-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --code-font: "Fira Code", "JetBrains Mono", "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --code-bg: #f9f9f8;
  --code-border: #e5e5e5;
  --code-text: #1a1a1a;
  --code-inline-bg: #f3f3f2;
  --code-line-highlight: rgba(13, 148, 136, 0.1);
  --code-token-keyword: #0d9488;
  --code-token-string: #059669;
  --code-token-comment: #6b7280;
  --code-token-number: #dc2626;
  --code-token-function: #7c3aed;
}

@theme inline {
  --color-background: var(--background);
  --color-element: var(--element-background);
  --color-secondary: var(--secondary-background);
  --color-foreground: var(--foreground);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-accent: var(--accent);
  --color-accent-soft: var(--accent-soft);
  --color-muted: var(--muted);
  --color-border: var(--border);
  --shadow-xl-soft: var(--shadow);
}

@layer base {
  * {
    @apply border-transparent outline-none;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-soft) transparent;
  }
  
  *::-webkit-scrollbar {
    @apply w-1.5 h-1.5;
  }
  
  *::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  
  *::-webkit-scrollbar-thumb {
    @apply rounded-full bg-accent/20 hover:bg-accent/40 transition-colors;
  }

  html {
    @apply overflow-y-scroll antialiased;
    scroll-behavior: smooth;
    scroll-padding-top: 5rem;
  }
  
  body {
    @apply flex min-h-svh flex-col font-sans text-foreground selection:bg-accent/20 selection:text-foreground transition-colors duration-300;
    background-color: var(--background);
    background-attachment: fixed;
    font-family: var(--display-font);
  }
  
  /* Theme-specific background effects */
  html[data-theme="light"] body,
  html[data-theme="academic"] body {
    background-image: 
      radial-gradient(at 0% 0%, rgba(16, 185, 129, 0.03) 0px, transparent 50%),
      radial-gradient(at 100% 0%, rgba(14, 165, 233, 0.03) 0px, transparent 50%);
  }
  
  html[data-theme="dark"] body {
    background-image: 
      radial-gradient(at 0% 0%, rgba(245, 158, 11, 0.05) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(20, 184, 166, 0.02) 0px, transparent 50%);
  }
  
  html[data-theme="cyber"] body {
    background-image: 
      radial-gradient(at 0% 0%, rgba(168, 85, 247, 0.08) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(236, 72, 153, 0.05) 0px, transparent 50%);
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight text-foreground;
    font-family: var(--heading-font);
  }
  
  a, button {
    @apply transition-all duration-200 ease-in-out cursor-pointer;
  }
  
  /* Refined focus states */
  a:focus-visible,
  button:focus-visible {
    @apply outline-none ring-2 ring-accent ring-offset-2 ring-offset-background rounded-md;
  }

  section, footer {
    @apply mx-auto w-full px-4 sm:px-8;
    max-width: min(85rem, 94vw);
  }

  /* Refined code styles */
  code, kbd, samp {
    font-family: var(--code-font);
    font-variant-ligatures: contextual;
  }
  
  /* Enhanced Inline Code */
  :not(pre) > code {
    @apply px-1.5 py-0.5 rounded-md text-[0.9em] bg-secondary border border-border/50 text-accent font-medium;
  }

  /* Refined Blockquotes */
  blockquote {
    @apply pl-6 border-l-4 border-accent/30 italic text-secondary-foreground/90 my-8 py-2 bg-accent/5 rounded-r-lg;
  }

  /* Enhanced Mermaid Styling */
  .mermaid {
    @apply my-10 p-6 rounded-2xl bg-element border border-border shadow-sm overflow-hidden flex justify-center items-center;
    transition: transform 0.3s ease, border-color 0.3s ease;
  }
  
  .mermaid:hover {
    @apply border-accent/30;
    transform: scale(1.01);
  }

  .mermaid svg {
    @apply max-w-full h-auto;
    filter: drop-shadow(0 4px 12px rgba(0,0,0,0.05));
  }
  
  /* Shiki/Astro code block refinements */
  .astro-code, .shiki {
    @apply my-8 rounded-2xl shadow-lg border border-border/50 overflow-hidden relative;
    padding: 1.5rem !important;
  }
  
  .astro-code::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent/40 via-accent to-accent/40 opacity-50;
  }
}

@utility max-w-app {
  @apply max-w-5xl;
}

/* Animations */
@keyframes slideUpFade {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-in {
  animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* Fix for Mermaid responsiveness */
@media (max-width: 640px) {
  .mermaid {
    @apply p-2;
    font-size: 12px;
  }
}
